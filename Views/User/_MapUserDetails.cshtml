@model HLWebRole.Models.UserModel
@*My Map implementation is based on modyfying code I found in the book:
Haack/Hanselman/Guthrie/Conery, "Professional ASP.NET MVC 1", Willey Publishing, USA 2009, p. 146 -  156.*@
<script src="http://dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=6.2" type="text/javascript"></script>
<script src="../../Scripts/map-plot-location.js" type="text/javascript"></script>
<div id="theMap" style="position: relative; width: 700px; height: 500px; left: 20px;
    top: 0px; border: 1px solid;">
</div>
<script type="text/javascript">

    try {
   
        $(document).ready(function() {
            var latitude = @(Model.Latitude)
            var longitude = @(Model.Longitude)

            if ((latitude == 0) || (longitude == 0))
                LoadMap();
            else
                LoadMap(latitude, longitude, mapLoaded);
        });
      
       function mapLoaded() {
            var title = '@(Model.FirstName)' + " " + '@(Model.LastName)';
            var address = '';
    
            LoadPin(center, title, address);
            map.SetZoomLevel(14);
        } 
    }
    catch (err) {
        var s = document.querySelector('#system-message'); s.innerHTML = typeof msg == 'string' ? msg : err; s.className = 'error';
    }
      
</script>
